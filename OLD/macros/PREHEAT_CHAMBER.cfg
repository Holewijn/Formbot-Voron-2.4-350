# ==========================================================
# ðŸŒ¡ï¸ CHAMBER PREHEAT ROUTINE
# ==========================================================
[gcode_macro PREHEAT_CHAMBER]
description: "Preheat chamber to target temperature using Nevermore and exhaust"
gcode:
  {% set target = params.TARGET|default(50)|float %}
  {% if target > 0 %}
    {action_respond_info("Preheating chamber to %.0fÂ°C" % target)}
    SET_FAN_SPEED FAN=nevermore SPEED=1.0
    SET_FAN_SPEED FAN=exhaust_fan SPEED=0.0
    M190 S100
    TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM={target-2}
    {action_respond_info("Chamber reached %.0fÂ°C" % target)}
  {% else %}
    {action_respond_info("No chamber heating needed for this material.")}
    SET_FAN_SPEED FAN=nevermore SPEED=0.0
    SET_FAN_SPEED FAN=exhaust_fan SPEED=0.5
  {% endif %}