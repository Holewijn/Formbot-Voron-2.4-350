[gcode_shell_command svc_autopush]
command: bash -lc "systemctl --user is-active klipper-config-autopush.service || true"
timeout: 5
verbose: True

[gcode_shell_command svc_stats_timer]
command: bash -lc "systemctl --user is-active klipper-stats-snapshot.timer || true"
timeout: 5
verbose: True

[gcode_macro CHECK_SERVICES]
description: Show autopush + stats timer status
gcode:
  RESPOND PREFIX="Services" MSG="Checking services..."
  RUN_SHELL_COMMAND CMD=svc_autopush
  RUN_SHELL_COMMAND CMD=svc_stats_timer
  RESPOND PREFIX="Services" MSG="Done. (See console for output)"